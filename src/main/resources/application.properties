spring.application.name=User Sentiment Analytics

# ==============================
# SERVER & BASIC SETTINGS
# ==============================
server.port=8080
logging.level.root=INFO
logging.level.com.ai=DEBUG
logging.level.org.springframework.web=INFO

# ==============================
# JPA / DATABASE (example: PostgreSQL)
# ==============================



spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Ensure schema.sql runs
spring.sql.init.mode=always
spring.sql.init.platform=

# ==============================
# ACTUATOR / MICROMETER / PROMETHEUS
# ==============================
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true

# Optional: actuator base path
management.endpoints.web.base-path=/actuator

# ==============================
# RESILIENCE4J - CIRCUIT BREAKER & RETRY
# For ClassifierNode, FeedbackHandlerNode, QueryHandlerNode
# ==============================

# ---- Circuit Breakers ----
resilience4j.circuitbreaker.instances.classifierNode.register-health-indicator=true
resilience4j.circuitbreaker.instances.classifierNode.sliding-window-size=20
resilience4j.circuitbreaker.instances.classifierNode.minimum-number-of-calls=10
resilience4j.circuitbreaker.instances.classifierNode.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.classifierNode.wait-duration-in-open-state=30s

resilience4j.circuitbreaker.instances.feedbackHandlerNode.register-health-indicator=true
resilience4j.circuitbreaker.instances.feedbackHandlerNode.sliding-window-size=20
resilience4j.circuitbreaker.instances.feedbackHandlerNode.minimum-number-of-calls=10
resilience4j.circuitbreaker.instances.feedbackHandlerNode.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.feedbackHandlerNode.wait-duration-in-open-state=30s

resilience4j.circuitbreaker.instances.queryHandlerNode.register-health-indicator=true
resilience4j.circuitbreaker.instances.queryHandlerNode.sliding-window-size=20
resilience4j.circuitbreaker.instances.queryHandlerNode.minimum-number-of-calls=10
resilience4j.circuitbreaker.instances.queryHandlerNode.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.queryHandlerNode.wait-duration-in-open-state=30s

# ---- Retry ----
resilience4j.retry.instances.classifierNode.max-attempts=3
resilience4j.retry.instances.classifierNode.wait-duration=500ms

resilience4j.retry.instances.feedbackHandlerNode.max-attempts=3
resilience4j.retry.instances.feedbackHandlerNode.wait-duration=500ms

resilience4j.retry.instances.queryHandlerNode.max-attempts=3
resilience4j.retry.instances.queryHandlerNode.wait-duration=500ms

# ==============================
# LLM PROVIDERS - SPRING AI
# (fill keys via env vars or secrets)
# ==============================

# ---- OpenAI ----
spring.ai.openai.api-key=${OPENAI_API_KEY:YOUR_OPENAI_KEY_HERE}
spring.ai.openai.chat.options.model=gpt-4.1-mini
spring.ai.openai.chat.options.temperature=0.2

# ---- Anthropic ----
spring.ai.anthropic.api-key=${ANTHROPIC_API_KEY:YOUR_ANTHROPIC_KEY_HERE}
spring.ai.anthropic.chat.options.model=claude-3-5-sonnet-latest
spring.ai.anthropic.chat.options.temperature=0.3

# ---- DeepSeek ----
spring.ai.deepseek.api-key=${DEEPSEEK_API_KEY:YOUR_DEEPSEEK_KEY_HERE}
spring.ai.deepseek.chat.options.model=deepseek-chat
spring.ai.deepseek.chat.options.temperature=0.2

# ---- Google GenAI (Gemini) ----
spring.ai.google.api-key=${GOOGLE_GENAI_API_KEY:YOUR_GOOGLE_KEY_HERE}
spring.ai.google.chat.options.model=gemini-1.5-flash
spring.ai.google.chat.options.temperature=0.3

# ---- Ollama (self-hosted) ----
spring.ai.ollama.base-url=http://localhost:11434
spring.ai.ollama.chat.options.model=llama3
spring.ai.ollama.chat.options.temperature=0.2

# ==============================
# CORS (optional)
# ==============================
# spring.web.cors.allowed-origins=http://localhost:5173
# spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
# spring.web.cors.allowed-headers=*
# spring.web.cors.allow-credentials=true

